{"version":3,"sources":["reportWebVitals.ts","components/layouts/LeftMenuItem.tsx","components/layouts/LeftMenu.tsx","components/layouts/NavBar.tsx","components/misc/BugReportFab.tsx","data/bunRankNameToNumber.ts","data/storedSettings.ts","scripts/sendBunAlertNotification.ts","styles/theme.ts","styles/index.ts","components/layouts/Note.tsx","components/misc/NotificationInfoManager.tsx","components/misc/Notifications.tsx","components/layouts/PageTemplate.tsx","data/preLoadedLocation.ts","components/pages/AboutPage.tsx","components/pages/ErrorPage.tsx","components/pages/Error404Page.tsx","config/firebaseConfig.ts","data/notifiedBuns.ts","helpers/getDurationInMinutes.ts","scripts/preProcessBunSightings.ts","helpers/metersToMiles.ts","helpers/getGoogleMapsDirections.ts","scripts/filterAndSortBunSightings.ts","scripts/pergeBunAlertIfStale.ts","components/misc/BunnyEmoji.tsx","components/layouts/BunSightingInfo.tsx","components/misc/RequireLocationServices.tsx","components/pages/FindBunsPage.tsx","components/misc/HomePageButton.tsx","components/pages/HomePage.tsx","components/pages/ReportBunPage.tsx","scripts/recordBunSighting.ts","components/pages/SettingsPage.tsx","scripts/listenForNewBunSightings.ts","App.tsx","styles/CustomThemeProvider.tsx","styles/useDarkMode.ts","index.tsx"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","LeftMenuItem","label","route","toLowerCase","replaceAll","icon","closeLeftMenu","routeHistory","useHistory","ListItem","button","onClick","push","ListItemIcon","ListItemText","primary","useStyles","makeStyles","theme","createStyles","root","width","backgroundColor","palette","background","paper","nested","paddingLeft","spacing","LeftMenu","open","classes","Drawer","anchor","onClose","List","className","Home","Info","Room","Search","Settings","flexGrow","menuButton","marginRight","title","NavBar","toggleTheme","pageTitle","toggleLeftMenu","AppBar","position","Toolbar","IconButton","edge","color","Typography","variant","fab","bottom","right","margin","fabSpacing","height","BugReportFab","Fab","window","getBunRankNumberFromBunRankName","bunRank","storedBunFilterParameters","bunFilterParametersString","localStorage","getItem","JSON","parse","maxAlertAge","maxDistanceAway","walkingSpeed","detourCoefficent","initializeStoredBunFilterParameters","getStoredBunFilterParameters","storedNotificationFilter","notificationFilterString","parseInt","initializeStoredNotificationFilter","getStoredNotificationFilter","browserSupportsNotifications","addBunnyEmojis","numberOfBuns","bunnies","i","lightTheme","createTheme","red","secondary","undefined","success","error","info","warning","darkTheme","type","styles","padded","padding","margined","marginedTopBottom","marginTop","marginBottom","marginedPadded","textAlign","hintIcon","fill","main","infoIcon","warningIcon","errorIcon","Note","prefix","message","typeToIconMap","hint","Grid","container","wrap","alignItems","justifyContent","item","NotificationInfoManager","accessToLocationServices","notificationFilter","React","useState","Notification","permission","allowNotifications","setAllowNotifications","Paper","Button","requestPermission","variantIcon","CheckCircleIcon","WarningIcon","ErrorIcon","InfoIcon","getContrastText","fontSize","iconVariant","opacity","display","MySnackbarContentWrapper","props","other","Icon","SnackbarContent","clsx","id","action","NotificationBar","notification","setNotification","displayNotification","setDisplayNotification","handleClose","event","reason","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","preLoadedLocation","PageTemplate","children","heading","useEffect","document","AboutPage","ErrorPage","errorCode","errorMessage","errorDescription","errorCodeString","Error404Page","firestore","firebase","initializeApp","apiKey","process","authDomain","databaseUrl","projectId","storageBucket","messagingSenderId","appId","measurementId","collection","doc","bunIds","initialLoad","addBun","bunId","includes","deleteBun","splice","indexOf","getDurationInMinutes","from","to","Math","trunc","preProcessBunSighting","bun","now","location","otherBuns","rankAndOtherBuns","rankOfSmallestBun","distanceAway","round","getDistance","distanceAwayText","estimatedArrival","calculateEstimatedMinutesAway","estimatedArrivalText","minutesSinceSighting","timeOfSighting","minutesSinceSightingText","googleMapsDirectionsLink","currentLocation","latitude","longitude","getGoogleMapsDirections","bunFilterParameters","bunMatchesFilters","filterBuns","buns","reduce","acceptedBuns","currentBun","delete","purgeBunAlertIfStale","concat","bunComparator","bun1","bun2","timeToArriveDiff","numDiff","rankDiff","BunnyEmoji","labeled","role","BunSightingInfo","primaryText","mergedDistanceAwayText","mergedTimeAwayText","secondaryText","ListItemAvatar","Avatar","ListItemSecondaryAction","disabled","RequireLocationServices","FindBunsPage","allBuns","allBunsToNearbyBuns","map","sort","preProcessFilterAndSortBuns","Date","nearbyBuns","setNearbyBuns","interval","setInterval","clearInterval","length","index","array","Divider","HomePageButton","iconElement","fullWidth","HomePage","getPreLoadedLocation","setPreLoadedLocation","ReportBunPage","setNumberOfBuns","setRankOfSmallestBun","Box","TextField","helperText","onChange","value","target","parseFloat","toString","select","option","MenuItem","set","catch","console","log","recordBunSighting","nanoid","SettingsPage","setNotificationFilter","setBunFilterParamters","storeIfValidBunFilterParamters","setItem","stringify","setStoredBunFilterParameters","min","actualMaxDistance","setStoredNotificationFilter","listenForNewBunSightings","onSnapshot","snapshot","docs","data","docChanges","forEach","documentChange","preProcessedBun","notificationDistanceText","badge","body","sendBunAlertNotification","warn","App","leftMenuOpen","setLeftMenuOpen","setAccessToLocationServices","navigator","geolocation","getCurrentPosition","newLocation","coords","setLocation","locationListener","watchPosition","clearWatch","setAllBuns","bunListener","Container","path","exact","CustomThemeProvider","setTheme","componentMounted","setComponentMounted","setMode","mode","localTheme","matchMedia","matches","useDarkMode","ThemeProvider","CssBaseline","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.79c655ca.chunk.js","sourcesContent":["import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { ListItem, ListItemIcon, ListItemText } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { useHistory } from \"react-router\";\r\n\r\ndeclare interface LeftMenuItemProps {\r\n  label: string;\r\n  route?: string;\r\n  icon?: React.ReactNode;\r\n  closeLeftMenu: () => void;\r\n}\r\n\r\nconst LeftMenuItem: React.FunctionComponent<LeftMenuItemProps> = ({\r\n  label,\r\n  route = `/bun-alert/${label.toLowerCase().replaceAll(\" \", \"-\")}`,\r\n  icon,\r\n  closeLeftMenu,\r\n}) => {\r\n  const routeHistory = useHistory();\r\n\r\n  return (\r\n    <ListItem\r\n      button\r\n      key={`menu_item_${label.toLowerCase().replaceAll(\" \", \"_\")}`}\r\n      onClick={() => {\r\n        routeHistory.push(route);\r\n        closeLeftMenu();\r\n      }}\r\n    >\r\n      {icon && <ListItemIcon>{icon}</ListItemIcon>}\r\n      <ListItemText primary={label} />\r\n    </ListItem>\r\n  );\r\n};\r\n\r\nexport default LeftMenuItem;\r\n","import {\r\n  createStyles,\r\n  Drawer,\r\n  List,\r\n  makeStyles,\r\n  Theme,\r\n} from \"@material-ui/core\";\r\nimport { Home, Info, Room, Search, Settings } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\nimport LeftMenuItem from \"./LeftMenuItem\";\r\n\r\ndeclare interface LeftMenuProps {\r\n  open: boolean;\r\n  closeLeftMenu: () => void;\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"100%\",\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n    nested: {\r\n      paddingLeft: theme.spacing(4),\r\n    },\r\n  })\r\n);\r\n\r\nconst LeftMenu: React.FunctionComponent<LeftMenuProps> = ({\r\n  open,\r\n  closeLeftMenu,\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Drawer anchor=\"left\" open={open} onClose={closeLeftMenu}>\r\n      <List className={classes.root}>\r\n        <LeftMenuItem\r\n          label=\"Home\"\r\n          route=\"/bun-alert/\"\r\n          icon={<Home />}\r\n          closeLeftMenu={closeLeftMenu}\r\n        />\r\n        <LeftMenuItem\r\n          label={\"About\"}\r\n          icon={<Info />}\r\n          closeLeftMenu={closeLeftMenu}\r\n        />\r\n        <LeftMenuItem\r\n          label=\"Report Bun\"\r\n          icon={<Room />}\r\n          closeLeftMenu={closeLeftMenu}\r\n        />\r\n        <LeftMenuItem\r\n          label=\"Find Buns\"\r\n          icon={<Search />}\r\n          closeLeftMenu={closeLeftMenu}\r\n        />\r\n        <LeftMenuItem\r\n          label=\"Settings\"\r\n          icon={<Settings />}\r\n          closeLeftMenu={closeLeftMenu}\r\n        />\r\n      </List>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default LeftMenu;\r\n","import {\r\n  AppBar,\r\n  createStyles,\r\n  IconButton,\r\n  makeStyles,\r\n  Theme,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport Brightness4Icon from \"@material-ui/icons/Brightness4\";\r\nimport Brightness7Icon from \"@material-ui/icons/Brightness7\";\r\nimport React from \"react\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n      flexGrow: 1,\r\n    },\r\n  })\r\n);\r\n\r\ndeclare interface NavBarProps {\r\n  theme: \"light\" | \"dark\";\r\n  toggleTheme: () => void;\r\n  pageTitle?: string;\r\n  toggleLeftMenu?: () => void;\r\n}\r\n\r\nconst NavBar: React.FunctionComponent<NavBarProps> = ({\r\n  theme,\r\n  toggleTheme,\r\n  pageTitle = \"\",\r\n  toggleLeftMenu,\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          {toggleLeftMenu && (\r\n            <IconButton\r\n              edge=\"start\"\r\n              className={classes.menuButton}\r\n              color=\"inherit\"\r\n              onClick={toggleLeftMenu}\r\n            >\r\n              <MenuIcon />\r\n            </IconButton>\r\n          )}\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            {pageTitle ? `${pageTitle} - ` : \"\"}Bun Alert\r\n          </Typography>\r\n\r\n          <div>\r\n            <IconButton\r\n              aria-label=\"Toggle light/dark theme\"\r\n              aria-controls=\"menu-appbar\"\r\n              aria-haspopup=\"false\"\r\n              onClick={toggleTheme}\r\n              color=\"inherit\"\r\n            >\r\n              {theme === \"dark\" ? <Brightness7Icon /> : <Brightness4Icon />}\r\n            </IconButton>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","import { createStyles, Fab, makeStyles, Theme } from \"@material-ui/core\";\r\nimport BugReportIcon from \"@material-ui/icons/BugReport\";\r\nimport React, { Fragment } from \"react\";\r\n\r\ndeclare interface BugReportFabProps {}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    fab: {\r\n      position: \"fixed\",\r\n      bottom: \"0px\",\r\n      right: \"0px\",\r\n      margin: theme.spacing(2),\r\n    },\r\n    // To add extra space to the bottom of the webpage so the fab doesn't block the lower right corner of content\r\n    fabSpacing: {\r\n      height: \"56px\",\r\n      margin: theme.spacing(2),\r\n    },\r\n  })\r\n);\r\n\r\nconst BugReportFab: React.FunctionComponent<BugReportFabProps> = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className={classes.fabSpacing} />\r\n      <Fab\r\n        color=\"primary\"\r\n        onClick={() => {\r\n          window.open(\r\n            \"https://github.com/andrewdimmer/bun-alert/issues\",\r\n            \"_blank\"\r\n          );\r\n        }}\r\n        className={classes.fab}\r\n      >\r\n        <BugReportIcon />\r\n      </Fab>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default BugReportFab;\r\n","export const getBunRankNumberFromBunRankName = (bunRank: BunRanks) => {\r\n  return {\r\n    \"Baby Bun\": 1,\r\n    \"King Bun\": 2,\r\n    \"Queen Bun\": 3,\r\n    \"Princess Bun\": 4,\r\n    \"Prince Bun\": 5,\r\n    \"Peasent Bun\": 6,\r\n  }[bunRank];\r\n};\r\n","const initializeStoredBunFilterParameters = () => {\r\n  const bunFilterParametersString = window.localStorage.getItem(\r\n    \"bunFilterParameters\"\r\n  );\r\n  const defaultBunFilterParameters: BunFilterParameters = {\r\n    maxAlertAge: 15,\r\n    maxDistanceAway: 1,\r\n    walkingSpeed: 3.1,\r\n    detourCoefficent: 0.7,\r\n  };\r\n\r\n  return bunFilterParametersString\r\n    ? (JSON.parse(bunFilterParametersString) as BunFilterParameters)\r\n    : defaultBunFilterParameters;\r\n};\r\n\r\nlet storedBunFilterParameters: BunFilterParameters =\r\n  initializeStoredBunFilterParameters();\r\n\r\nexport const getStoredBunFilterParameters = () => {\r\n  return storedBunFilterParameters;\r\n};\r\n\r\nexport const setStoredBunFilterParameters = (\r\n  bunFilterParameters: BunFilterParameters\r\n) => {\r\n  storedBunFilterParameters = bunFilterParameters;\r\n  window.localStorage.setItem(\r\n    \"bunFilterParameters\",\r\n    JSON.stringify(bunFilterParameters)\r\n  );\r\n};\r\n\r\nconst initializeStoredNotificationFilter = () => {\r\n  const notificationFilterString =\r\n    window.localStorage.getItem(\"notificationFilter\");\r\n  const defaultNotificationFilter = 6;\r\n\r\n  return notificationFilterString\r\n    ? parseInt(notificationFilterString)\r\n    : defaultNotificationFilter;\r\n};\r\n\r\nlet storedNotificationFilter: number = initializeStoredNotificationFilter();\r\n\r\nexport const getStoredNotificationFilter = () => {\r\n  return storedNotificationFilter;\r\n};\r\n\r\nexport const setStoredNotificationFilter = (notificationFilter: number) => {\r\n  storedNotificationFilter = notificationFilter;\r\n  window.localStorage.setItem(\r\n    \"notificationFilter\",\r\n    notificationFilter.toString()\r\n  );\r\n};\r\n","import { getBunRankNumberFromBunRankName } from \"../data/bunRankNameToNumber\";\r\nimport { getStoredNotificationFilter } from \"../data/storedSettings\";\r\n\r\nexport const browserSupportsNotifications = \"Notification\" in window;\r\n\r\nconst addBunnyEmojis = (numberOfBuns: number) => {\r\n  let bunnies = \"\";\r\n  for (let i = 0; i < numberOfBuns; i++) {\r\n    bunnies += \"🐇\";\r\n  }\r\n  return bunnies;\r\n};\r\n\r\nexport const sendBunAlertNotification = (bun: PreProcessedBunSighting) => {\r\n  if (\r\n    browserSupportsNotifications &&\r\n    Notification.permission === \"granted\" &&\r\n    getBunRankNumberFromBunRankName(bun.rankOfSmallestBun) <=\r\n      getStoredNotificationFilter()\r\n  ) {\r\n    const notificationDistanceText = bun.distanceAwayText\r\n      ? ` ${bun.distanceAwayText}`\r\n      : \"\";\r\n\r\n    new Notification(\"BUN ALERT!\", {\r\n      badge: \"/bun-alert/logo512.png\",\r\n      body: `${\r\n        bun.rankAndOtherBuns\r\n      } sighted${notificationDistanceText}. Learn more on the \"Find Buns\" page. ${addBunnyEmojis(\r\n        bun.numberOfBuns\r\n      )}`,\r\n      icon: \"/bun-alert/logo512.png\",\r\n      // image: \"\", // TODO: Add once Image Support is Added\r\n    });\r\n  }\r\n};\r\n","import { createTheme } from \"@material-ui/core\";\r\nimport { red } from \"@material-ui/core/colors\";\r\n\r\nexport const lightTheme = createTheme({\r\n  palette: {\r\n    primary: red,\r\n    secondary: undefined,\r\n    success: undefined,\r\n    error: undefined,\r\n    info: undefined,\r\n    warning: undefined,\r\n  },\r\n});\r\n\r\nexport const darkTheme = createTheme({\r\n  palette: {\r\n    type: \"dark\",\r\n    primary: red,\r\n    secondary: undefined,\r\n    success: undefined,\r\n    error: undefined,\r\n    info: undefined,\r\n    warning: undefined,\r\n  },\r\n});\r\n","import { Theme } from \"@material-ui/core\";\r\nimport { createStyles, makeStyles } from \"@material-ui/styles\";\r\nimport { darkTheme as dark, lightTheme as light } from \"./theme\";\r\n\r\n// Evaluate these styles and see what ones we still want/need\r\nexport const styles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    padded: {\r\n      padding: theme.spacing(2),\r\n    },\r\n    margined: {\r\n      margin: theme.spacing(2),\r\n    },\r\n    marginedTopBottom: {\r\n      marginTop: theme.spacing(2),\r\n      marginBottom: theme.spacing(2),\r\n    },\r\n    marginedPadded: {\r\n      margin: theme.spacing(2),\r\n      padding: theme.spacing(2),\r\n    },\r\n    pageTitle: {\r\n      textAlign: \"center\",\r\n      marginBottom: theme.spacing(2),\r\n    },\r\n    hintIcon: {\r\n      fill: theme.palette.success.main,\r\n    },\r\n    infoIcon: {\r\n      fill: theme.palette.info.main,\r\n    },\r\n    warningIcon: {\r\n      fill: theme.palette.warning.main,\r\n    },\r\n    errorIcon: {\r\n      fill: theme.palette.error.main,\r\n    },\r\n  })\r\n);\r\n\r\nexport const lightTheme = light;\r\nexport const darkTheme = dark;\r\n","import { Grid, Typography } from \"@material-ui/core\";\r\nimport ChatIcon from \"@material-ui/icons/Chat\";\r\nimport ErrorIcon from \"@material-ui/icons/Error\";\r\nimport InfoIcon from \"@material-ui/icons/Info\";\r\nimport WarningIcon from \"@material-ui/icons/Warning\";\r\nimport React from \"react\";\r\nimport { styles } from \"../../styles\";\r\n\r\ndeclare interface NoteProps {\r\n  type: \"hint\" | \"info\" | \"warning\" | \"error\";\r\n  prefix?: string;\r\n  message: string;\r\n  className?: string;\r\n}\r\n\r\nexport const Note: React.FunctionComponent<NoteProps> = ({\r\n  type,\r\n  prefix,\r\n  message,\r\n  className,\r\n}) => {\r\n  const classes = styles();\r\n\r\n  const typeToIconMap = {\r\n    hint: <ChatIcon className={classes.hintIcon} />,\r\n    info: <InfoIcon className={classes.infoIcon} />,\r\n    warning: <WarningIcon className={classes.warningIcon} />,\r\n    error: <ErrorIcon className={classes.errorIcon} />,\r\n  };\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      spacing={2}\r\n      className={className}\r\n      wrap=\"nowrap\"\r\n      alignItems=\"center\"\r\n      justifyContent=\"flex-start\"\r\n    >\r\n      <Grid item>{typeToIconMap[type]}</Grid>\r\n      <Grid item>\r\n        {prefix ? (\r\n          <Typography>\r\n            <strong>{prefix}</strong> {message}\r\n          </Typography>\r\n        ) : (\r\n          <Typography>{message}</Typography>\r\n        )}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default Note;\r\n","import { Button, Grid, Paper, Typography } from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport { browserSupportsNotifications } from \"../../scripts/sendBunAlertNotification\";\r\nimport { styles } from \"../../styles\";\r\nimport Note from \"../layouts/Note\";\r\nimport InfoIcon from \"@material-ui/icons/Info\";\r\nimport WarningIcon from \"@material-ui/icons/Warning\";\r\n\r\ndeclare interface NotificationInfoManagerProps\r\n  extends RequiresAccessToLocationServices {\r\n  notificationFilter: number;\r\n}\r\n\r\nconst NotificationInfoManager: React.FunctionComponent<NotificationInfoManagerProps> =\r\n  ({ accessToLocationServices, notificationFilter }) => {\r\n    const classes = styles();\r\n\r\n    const [allowNotifications, setAllowNotifications] = React.useState(\r\n      Notification.permission\r\n    );\r\n\r\n    return browserSupportsNotifications ? (\r\n      accessToLocationServices === true ? (\r\n        allowNotifications === \"granted\" ? (\r\n          notificationFilter === 0 ? (\r\n            <Paper className={classes.marginedPadded}>\r\n              <Note\r\n                type={\"info\"}\r\n                prefix=\"Do Not Disturb is on!\"\r\n                message={\r\n                  'You will not receive any new Bun Alerts until you turn off Do Not Disturb on the \"Settings\" page. In the mean time though, you\\'re free to find nearby buns yourself using the \"Find Buns\" page.'\r\n                }\r\n              />\r\n            </Paper>\r\n          ) : (\r\n            <Fragment />\r\n          )\r\n        ) : (\r\n          <Paper className={classes.marginedPadded}>\r\n            <Grid\r\n              container\r\n              spacing={2}\r\n              wrap=\"nowrap\"\r\n              alignItems=\"center\"\r\n              justifyContent=\"flex-start\"\r\n            >\r\n              <Grid item>\r\n                {allowNotifications === \"default\" ? (\r\n                  <InfoIcon className={classes.infoIcon} />\r\n                ) : (\r\n                  <WarningIcon className={classes.warningIcon} />\r\n                )}\r\n              </Grid>\r\n              <Grid item>\r\n                <Typography>\r\n                  <strong>\r\n                    Notifications are required to receive Bun Alerts\r\n                    automatically when a new bun is sighted!\r\n                  </strong>{\" \"}\r\n                  If you wish to be automatically notified when a new bun is\r\n                  sighted, please enable notifications to find buns.\r\n                </Typography>\r\n              </Grid>\r\n              {allowNotifications === \"default\" && (\r\n                <Grid item>\r\n                  <Button\r\n                    color=\"primary\"\r\n                    onClick={() => {\r\n                      try {\r\n                        Notification.requestPermission().then(\r\n                          setAllowNotifications\r\n                        );\r\n                      } catch {\r\n                        Notification.requestPermission(setAllowNotifications);\r\n                      }\r\n                    }}\r\n                    variant=\"outlined\"\r\n                  >\r\n                    Enable Notifications\r\n                  </Button>\r\n                </Grid>\r\n              )}\r\n            </Grid>\r\n          </Paper>\r\n        )\r\n      ) : (\r\n        <Paper className={classes.marginedPadded}>\r\n          <Note\r\n            type={accessToLocationServices === false ? \"warning\" : \"info\"}\r\n            prefix=\"Location Services are required to receive Bun Alerts automatically when a new bun is sighted!\"\r\n            message=\"We need to know where you are to notify you about nearby buns. If you wish to be automatically notified when a new bun is sighted, please enable location services.\"\r\n          />\r\n        </Paper>\r\n      )\r\n    ) : (\r\n      <Paper className={classes.marginedPadded}>\r\n        <Note\r\n          type=\"warning\"\r\n          prefix=\"Your web browser does not support notifications.\"\r\n          message=\"You will not be able to receive Bun Alerts automatically when a new bun is sighted. However, you're free to report buns you see and find nearby buns yourself.\"\r\n        />{\" \"}\r\n      </Paper>\r\n    );\r\n  };\r\n\r\nexport default NotificationInfoManager;\r\n","import {\r\n  IconButton,\r\n  Snackbar,\r\n  SnackbarContent,\r\n  Theme,\r\n} from \"@material-ui/core\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport ErrorIcon from \"@material-ui/icons/Error\";\r\nimport InfoIcon from \"@material-ui/icons/Info\";\r\nimport WarningIcon from \"@material-ui/icons/Warning\";\r\nimport { createStyles, makeStyles } from \"@material-ui/styles\";\r\nimport clsx from \"clsx\";\r\nimport React, { SyntheticEvent } from \"react\";\r\n\r\nconst variantIcon = {\r\n  success: CheckCircleIcon,\r\n  warning: WarningIcon,\r\n  error: ErrorIcon,\r\n  info: InfoIcon,\r\n};\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    success: {\r\n      color: theme.palette.getContrastText(theme.palette.success.main),\r\n      backgroundColor: theme.palette.success.main,\r\n    },\r\n    error: {\r\n      color: theme.palette.getContrastText(theme.palette.error.main),\r\n      backgroundColor: theme.palette.error.main,\r\n    },\r\n    info: {\r\n      color: theme.palette.getContrastText(theme.palette.info.main),\r\n      backgroundColor: theme.palette.info.main,\r\n    },\r\n    warning: {\r\n      color: theme.palette.getContrastText(theme.palette.warning.main),\r\n      backgroundColor: theme.palette.warning.main,\r\n    },\r\n    icon: {\r\n      fontSize: 20,\r\n    },\r\n    iconVariant: {\r\n      opacity: 0.9,\r\n      marginRight: theme.spacing(1),\r\n    },\r\n    message: {\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n    },\r\n  })\r\n);\r\n\r\nexport interface SnackbarProps {\r\n  className?: string;\r\n  message?: string;\r\n  onClose?: () => void;\r\n  variant: keyof typeof variantIcon;\r\n}\r\n\r\nconst MySnackbarContentWrapper: React.FunctionComponent<SnackbarProps> = (\r\n  props: SnackbarProps\r\n) => {\r\n  const classes = useStyles();\r\n  const { className, message, onClose, variant, ...other } = props;\r\n  const Icon = variantIcon[variant];\r\n\r\n  return (\r\n    <SnackbarContent\r\n      className={clsx(classes[variant], className)}\r\n      aria-describedby=\"client-snackbar\"\r\n      message={\r\n        <span id=\"client-snackbar\" className={classes.message}>\r\n          <Icon className={clsx(classes.icon, classes.iconVariant)} />\r\n          {message}\r\n        </span>\r\n      }\r\n      action={[\r\n        <IconButton\r\n          key=\"close\"\r\n          aria-label=\"close\"\r\n          color=\"inherit\"\r\n          onClick={onClose}\r\n        >\r\n          <CloseIcon className={classes.icon} />\r\n        </IconButton>,\r\n      ]}\r\n      {...other}\r\n    />\r\n  );\r\n};\r\n\r\ndeclare enum NotificationTypesEnum {\r\n  success,\r\n  error,\r\n  info,\r\n  warning,\r\n}\r\n\r\ndeclare type NotificationTypes = keyof typeof NotificationTypesEnum;\r\n\r\ndeclare interface NotificationMessageInterface {\r\n  message: string;\r\n  type: NotificationTypes;\r\n}\r\n\r\nexport type NotificationMessage = NotificationMessageInterface | null;\r\n\r\nexport interface SetNotificationMessageProps {\r\n  setNotification: (notificationMessage: NotificationMessage) => void;\r\n}\r\n\r\ndeclare interface MessageProps extends SetNotificationMessageProps {\r\n  notification: NotificationMessage;\r\n}\r\n\r\nexport default function NotificationBar({\r\n  notification,\r\n  setNotification,\r\n}: MessageProps) {\r\n  const [displayNotification, setDisplayNotification] =\r\n    React.useState<NotificationMessageInterface>({ type: \"info\", message: \"\" });\r\n\r\n  const handleClose = (event?: SyntheticEvent, reason?: string) => {\r\n    if (reason === \"clickaway\") {\r\n      return;\r\n    }\r\n    setNotification(null);\r\n  };\r\n\r\n  if (notification && notification !== displayNotification) {\r\n    setDisplayNotification(notification);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n        open={!!notification}\r\n        autoHideDuration={6000}\r\n        onClose={handleClose}\r\n      >\r\n        <MySnackbarContentWrapper\r\n          onClose={handleClose}\r\n          variant={displayNotification.type}\r\n          message={displayNotification.message}\r\n        />\r\n      </Snackbar>\r\n    </div>\r\n  );\r\n}\r\n","import { Paper, Typography } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { styles } from \"../../styles\";\r\n\r\ndeclare interface PageTemplateProps {\r\n  heading: string;\r\n  title?: string;\r\n}\r\n\r\nconst PageTemplate: React.FunctionComponent<PageTemplateProps> = ({\r\n  children,\r\n  heading,\r\n  title = heading,\r\n}) => {\r\n  const classes = styles();\r\n\r\n  React.useEffect(() => {\r\n    document.title = (title ? `${title} - ` : \"\") + \"Bun Alert\";\r\n  }, [title]);\r\n\r\n  return (\r\n    <Paper className={classes.marginedPadded}>\r\n      <Typography variant=\"h3\" className={classes.pageTitle}>\r\n        {heading}\r\n      </Typography>\r\n      {children}\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default PageTemplate;\r\n","let preLoadedLocation: GeoLocation;\r\n\r\nexport const getPreLoadedLocation = () => {\r\n  return preLoadedLocation;\r\n};\r\n\r\nexport const setPreLoadedLocation = (location: GeoLocation) => {\r\n  preLoadedLocation = location;\r\n};\r\n","import React from \"react\";\r\nimport PageTemplate from \"../layouts/PageTemplate\";\r\n\r\ndeclare interface AboutPageProps {}\r\n\r\nconst AboutPage: React.FunctionComponent<AboutPageProps> = () => {\r\n  return <PageTemplate heading=\"About Bun Alert\" title=\"About\"></PageTemplate>;\r\n};\r\n\r\nexport default AboutPage;\r\n","import { Typography } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport PageTemplate from \"../layouts/PageTemplate\";\r\n\r\ndeclare interface ErrorPageProps {\r\n  errorCode?: number;\r\n  errorMessage: string;\r\n  errorDescription?: string;\r\n}\r\n\r\nconst ErrorPage: React.FunctionComponent<ErrorPageProps> = ({\r\n  errorCode,\r\n  errorMessage,\r\n  errorDescription,\r\n}) => {\r\n  const errorCodeString = errorCode !== undefined ? ` ${errorCode}` : \"\";\r\n\r\n  return (\r\n    <PageTemplate\r\n      heading={`Error${errorCodeString}!`}\r\n      title={`Error${errorCodeString}`}\r\n    >\r\n      <Typography variant=\"h4\">{errorMessage}</Typography>\r\n      {errorDescription && (\r\n        <Typography variant=\"body1\">{errorDescription}</Typography>\r\n      )}\r\n    </PageTemplate>\r\n  );\r\n};\r\n\r\nexport default ErrorPage;\r\n","import React from \"react\";\r\nimport ErrorPage from \"./ErrorPage\";\r\n\r\nconst Error404Page: React.FunctionComponent = () => {\r\n  return (\r\n    <ErrorPage\r\n      errorCode={404}\r\n      errorMessage=\"Unable to find the page you are looking for.\"\r\n      errorDescription=\"Unless, of course, you are looking for an error page. In which case,\r\ngreat job! You found it!\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default Error404Page;\r\n","import firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\n\r\nexport const firebaseApp = firebase.initializeApp({\r\n  apiKey: process.env.REACT_APP_FIREBASE_APIKEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTHDOMAIN,\r\n  databaseUrl: process.env.REACT_APP_FIREBASE_DATABASE_URL,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECTID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGEBUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGINGSENDERID,\r\n  appId: process.env.REACT_APP_FIREBASE_APPID,\r\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENTID,\r\n});\r\n\r\nexport const firestore = firebaseApp\r\n  .firestore()\r\n  .collection(\"hackathons\")\r\n  .doc(\"SelfieHacks2021\");\r\n","const bunIds: string[] = [];\r\n\r\nlet initialLoad = true;\r\n\r\nexport const addBun = (bunId: string) => {\r\n  if (!bunIds.includes(bunId)) {\r\n    bunIds.push(bunId);\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const deleteBun = (bunId: string) => {\r\n  if (bunIds.includes(bunId)) {\r\n    bunIds.splice(bunIds.indexOf(bunId), 1);\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const isInitialLoad = () => {\r\n  return initialLoad;\r\n};\r\n\r\nexport const runInitialLoad = () => {\r\n  initialLoad = false;\r\n};\r\n","export const getDurationInMinutes = (from: number, to: number) => {\r\n  return Math.trunc((to - from) / 60000);\r\n};\r\n","import { getDistance } from \"geolib\";\r\nimport { getStoredBunFilterParameters } from \"../data/storedSettings\";\r\nimport { getDurationInMinutes } from \"../helpers/getDurationInMinutes\";\r\nimport { getGoogleMapsDirections } from \"../helpers/getGoogleMapsDirections\";\r\nimport { metersToMiles } from \"../helpers/metersToMiles\";\r\n\r\nexport const preProcessBunSighting = (\r\n  bun: BunSighting,\r\n  now: number,\r\n  location: GeoLocation | undefined\r\n) => {\r\n  const otherBuns =\r\n    bun.numberOfBuns > 1\r\n      ? ` + ${bun.numberOfBuns - 1} other${bun.numberOfBuns !== 2 ? \"s\" : \"\"}`\r\n      : \"\";\r\n  const rankAndOtherBuns = `${bun.rankOfSmallestBun}${otherBuns}`;\r\n\r\n  // Determine Bun Sighting Distance Text\r\n  const distanceAway = location\r\n    ? Math.round(metersToMiles(getDistance(location, bun)) * 100) / 100\r\n    : -1;\r\n  const distanceAwayText =\r\n    distanceAway !== -1\r\n      ? `${distanceAway} mile${distanceAway !== 1 ? \"s\" : \"\"} away`\r\n      : \"\";\r\n\r\n  // Determine Bun Sighting Estimated Arrival Text\r\n  const estimatedArrival = calculateEstimatedMinutesAway(distanceAway);\r\n\r\n  const estimatedArrivalText =\r\n    estimatedArrival !== -1\r\n      ? `about ${estimatedArrival} minute${\r\n          estimatedArrival !== 1 ? \"s\" : \"\"\r\n        } away`\r\n      : \"\";\r\n\r\n  // Determine Bun Sighting Duration Text\r\n  const minutesSinceSighting = getDurationInMinutes(bun.timeOfSighting, now);\r\n  const minutesSinceSightingText =\r\n    minutesSinceSighting === 0\r\n      ? \"just now\"\r\n      : `${minutesSinceSighting} minute${\r\n          minutesSinceSighting > 1 ? \"s\" : \"\"\r\n        } ago`;\r\n\r\n  // Get Google Maps Directions Link\r\n  const googleMapsDirectionsLink = location\r\n    ? getGoogleMapsDirections(bun, location)\r\n    : \"\";\r\n\r\n  return {\r\n    ...bun,\r\n    rankAndOtherBuns,\r\n    distanceAway,\r\n    distanceAwayText,\r\n    estimatedArrival,\r\n    estimatedArrivalText,\r\n    minutesSinceSighting,\r\n    minutesSinceSightingText,\r\n    googleMapsDirectionsLink,\r\n  };\r\n};\r\n\r\nexport const calculateEstimatedMinutesAway = (distanceAway: number) => {\r\n  const bunFilterParameters = getStoredBunFilterParameters();\r\n  if (distanceAway !== -1) {\r\n    return Math.round(\r\n      (distanceAway /\r\n        (bunFilterParameters.walkingSpeed *\r\n          bunFilterParameters.detourCoefficent)) *\r\n        60\r\n    );\r\n  }\r\n  return -1;\r\n};\r\n","export const metersToMiles = (meters: number) => {\r\n  return meters / 1609;\r\n};\r\n","export const getGoogleMapsDirections = (\r\n  bun: BunSighting,\r\n  currentLocation: GeoLocation\r\n) => {\r\n  return `https://www.google.com/maps/dir/${currentLocation.latitude},+${currentLocation.longitude}/${bun.latitude},${bun.longitude}/`;\r\n};\r\n","import { getBunRankNumberFromBunRankName } from \"../data/bunRankNameToNumber\";\r\nimport { getStoredBunFilterParameters } from \"../data/storedSettings\";\r\nimport { purgeBunAlertIfStale } from \"./pergeBunAlertIfStale\";\r\nimport { preProcessBunSighting } from \"./preProcessBunSightings\";\r\n\r\nexport const bunMatchesFilters = (bun: PreProcessedBunSighting) => {\r\n  const bunFilterParameters = getStoredBunFilterParameters();\r\n\r\n  // Omit Baby Buns more than 1/10th of a mile away\r\n  if (bun.rankOfSmallestBun === \"Baby Bun\" && bun.distanceAway > 0.1) {\r\n    return false;\r\n  }\r\n\r\n  // Omit all buns further than the max distance\r\n  if (bun.distanceAway > bunFilterParameters.maxDistanceAway) {\r\n    return false;\r\n  }\r\n\r\n  // Omit all buns with a Bun Alert Freshness Score above the max alert age\r\n  if (\r\n    bun.minutesSinceSighting + bun.estimatedArrival >\r\n    bunFilterParameters.maxAlertAge\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nexport const filterBuns = (buns: PreProcessedBunSighting[], now: number) => {\r\n  return buns.reduce((acceptedBuns, currentBun) => {\r\n    if (\r\n      !purgeBunAlertIfStale(currentBun, now) &&\r\n      bunMatchesFilters(currentBun)\r\n    ) {\r\n      return acceptedBuns.concat(currentBun);\r\n    }\r\n    return acceptedBuns;\r\n  }, [] as PreProcessedBunSighting[]);\r\n};\r\n\r\nexport const preProcessFilterAndSortBuns = (\r\n  buns: BunSighting[],\r\n  now: number,\r\n  location: GeoLocation\r\n) => {\r\n  const filteredBuns = filterBuns(\r\n    buns.map((bun) => {\r\n      return preProcessBunSighting(bun, now, location);\r\n    }),\r\n    now\r\n  );\r\n  const sortedBuns = filteredBuns.concat([]).sort(bunComparator);\r\n  return sortedBuns;\r\n};\r\n\r\nconst bunComparator = (\r\n  bun1: PreProcessedBunSighting,\r\n  bun2: PreProcessedBunSighting\r\n) => {\r\n  const timeToArriveDiff =\r\n    bun1.minutesSinceSighting +\r\n    bun1.estimatedArrival -\r\n    (bun2.minutesSinceSighting + bun2.estimatedArrival);\r\n  if (timeToArriveDiff !== 0) {\r\n    return timeToArriveDiff;\r\n  }\r\n\r\n  const numDiff = bun2.numberOfBuns - bun1.numberOfBuns;\r\n  if (numDiff !== 0) {\r\n    return numDiff;\r\n  }\r\n\r\n  const rankDiff =\r\n    getBunRankNumberFromBunRankName(bun1.rankOfSmallestBun) -\r\n    getBunRankNumberFromBunRankName(bun2.rankOfSmallestBun);\r\n  if (rankDiff !== 0) {\r\n    return rankDiff;\r\n  }\r\n\r\n  const timeDiff = bun1.timeOfSighting - bun2.timeOfSighting;\r\n  return timeDiff;\r\n};\r\n","import { firestore } from \"../config/firebaseConfig\";\r\nimport { deleteBun } from \"../data/notifiedBuns\";\r\nimport { getDurationInMinutes } from \"../helpers/getDurationInMinutes\";\r\n\r\nexport const purgeBunAlertIfStale = (bun: BunSighting, now: number) => {\r\n  if (getDurationInMinutes(bun.timeOfSighting, now) > 60) {\r\n    deleteBun(bun.id);\r\n    firestore.collection(\"buns\").doc(bun.id).delete();\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n","import React from \"react\";\r\n\r\ndeclare interface BunnyEmojiProps {\r\n  labeled?: boolean;\r\n}\r\n\r\nconst BunnyEmoji: React.FunctionComponent<BunnyEmojiProps> = ({ labeled }) => {\r\n  const label = labeled ? \"bunny\" : \"\";\r\n\r\n  return (\r\n    <span className=\"emoji\" role=\"img\" aria-label={label} aria-hidden={!label}>\r\n      🐇\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default BunnyEmoji;\r\n","import {\r\n  Avatar,\r\n  IconButton,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  ListItemSecondaryAction,\r\n  ListItemText,\r\n} from \"@material-ui/core\";\r\nimport MapIcon from \"@material-ui/icons/Map\";\r\nimport React from \"react\";\r\nimport BunnyEmoji from \"../misc/BunnyEmoji\";\r\n\r\ndeclare interface BunSightingInfoProps {\r\n  bun: PreProcessedBunSighting;\r\n}\r\n\r\nconst BunSightingInfo: React.FunctionComponent<BunSightingInfoProps> = ({\r\n  bun,\r\n}) => {\r\n  const primaryText = `${bun.rankAndOtherBuns} sighted nearby!`;\r\n  const mergedDistanceAwayText = bun.distanceAwayText\r\n    ? ` | ${bun.distanceAwayText}`\r\n    : \"\";\r\n  const mergedTimeAwayText = bun.estimatedArrivalText\r\n    ? ` (${bun.estimatedArrivalText})`\r\n    : \"\";\r\n  const secondaryText = `Sighted ${bun.minutesSinceSightingText}${mergedDistanceAwayText}${mergedTimeAwayText}`;\r\n\r\n  return (\r\n    <ListItem>\r\n      <ListItemAvatar>\r\n        <Avatar>\r\n          <BunnyEmoji />\r\n        </Avatar>\r\n      </ListItemAvatar>\r\n      <ListItemText primary={primaryText} secondary={secondaryText} />\r\n      <ListItemSecondaryAction>\r\n        <IconButton\r\n          edge=\"end\"\r\n          aria-label=\"open in maps\"\r\n          disabled={!bun.googleMapsDirectionsLink}\r\n          onClick={() => {\r\n            window.open(bun.googleMapsDirectionsLink, \"_blank\");\r\n          }}\r\n        >\r\n          <MapIcon />\r\n        </IconButton>\r\n      </ListItemSecondaryAction>\r\n    </ListItem>\r\n  );\r\n};\r\n\r\nexport default BunSightingInfo;\r\n","import React, { Fragment } from \"react\";\r\nimport Note from \"../layouts/Note\";\r\n\r\ndeclare interface RequireLocationServicesProps\r\n  extends RequiresAccessToLocationServices {\r\n  prefix?: string;\r\n  message?: string;\r\n}\r\n\r\nconst RequireLocationServices: React.FunctionComponent<RequireLocationServicesProps> =\r\n  ({\r\n    accessToLocationServices,\r\n    prefix = \"Location Services are required!\",\r\n    message = \"Please enable location services to access this page.\",\r\n    children,\r\n  }) => {\r\n    return (\r\n      <Fragment>\r\n        {accessToLocationServices === true ? (\r\n          children\r\n        ) : (\r\n          <Note\r\n            type={accessToLocationServices === false ? \"error\" : \"info\"}\r\n            prefix={prefix}\r\n            message={message}\r\n          />\r\n        )}\r\n      </Fragment>\r\n    );\r\n  };\r\n\r\nexport default RequireLocationServices;\r\n","import { Divider, List } from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport { preProcessFilterAndSortBuns } from \"../../scripts/filterAndSortBunSightings\";\r\nimport BunSightingInfo from \"../layouts/BunSightingInfo\";\r\nimport Note from \"../layouts/Note\";\r\nimport PageTemplate from \"../layouts/PageTemplate\";\r\nimport RequireLocationServices from \"../misc/RequireLocationServices\";\r\n\r\ndeclare interface FindBunsPageProps extends RequiresAccessToLocationServices {\r\n  location: GeoLocation | undefined;\r\n  allBuns: BunSighting[];\r\n}\r\n\r\nconst FindBunsPage: React.FunctionComponent<FindBunsPageProps> = ({\r\n  accessToLocationServices,\r\n  location,\r\n  allBuns,\r\n}) => {\r\n  const allBunsToNearbyBuns = (\r\n    buns: BunSighting[],\r\n    now: number,\r\n    location: GeoLocation | undefined\r\n  ) => {\r\n    return location ? preProcessFilterAndSortBuns(buns, now, location) : [];\r\n  };\r\n\r\n  const [nearbyBuns, setNearbyBuns] = React.useState(\r\n    allBunsToNearbyBuns(allBuns, Date.now(), location)\r\n  );\r\n\r\n  // Time refresher\r\n  React.useEffect(() => {\r\n    setNearbyBuns(allBunsToNearbyBuns(allBuns, Date.now(), location));\r\n    const interval = setInterval(() => {\r\n      setNearbyBuns(allBunsToNearbyBuns(allBuns, Date.now(), location));\r\n    }, 60000);\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, [allBuns, location]);\r\n\r\n  return (\r\n    <PageTemplate heading=\"Find Nearby Buns!\" title=\"Find Buns\">\r\n      <RequireLocationServices\r\n        accessToLocationServices={accessToLocationServices}\r\n        prefix=\"Location Services are required to find nearby buns!\"\r\n        message=\"We need to know where you are to show you nearby buns... please enable location services to find buns.\"\r\n      >\r\n        {nearbyBuns.length > 0 ? (\r\n          <List>\r\n            {nearbyBuns.map((bun, index, array) => {\r\n              return (\r\n                <Fragment key={`bun_sighting_${bun.id}`}>\r\n                  <BunSightingInfo bun={bun} />\r\n                  {index !== array.length - 1 && <Divider />}\r\n                </Fragment>\r\n              );\r\n            })}\r\n          </List>\r\n        ) : (\r\n          <Note\r\n            type=\"info\"\r\n            prefix=\"There are not any nearby buns reported.\"\r\n            message={\r\n              'You can either report one yourself from the \"Report Bun\" page, or you can adjust the scope of your search from the \"Settings\" page to see if you can find buns further out.'\r\n            }\r\n          />\r\n        )}\r\n      </RequireLocationServices>\r\n    </PageTemplate>\r\n  );\r\n};\r\n\r\nexport default FindBunsPage;\r\n","import { Button, Typography } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { styles } from \"../../styles\";\r\n\r\ndeclare interface HomePageButtonProps {\r\n  label: string;\r\n  route: string;\r\n  icon: any;\r\n}\r\n\r\nconst HomePageButton: React.FunctionComponent<HomePageButtonProps> = ({\r\n  label,\r\n  route,\r\n  icon,\r\n}) => {\r\n  const classes = styles();\r\n  const routeHistory = useHistory();\r\n\r\n  const Icon = icon;\r\n  const iconElement = <Icon className={classes.margined} />;\r\n\r\n  return (\r\n    <Button\r\n      className={classes.marginedTopBottom}\r\n      color=\"primary\"\r\n      fullWidth\r\n      onClick={() => {\r\n        routeHistory.push(route);\r\n      }}\r\n      variant=\"contained\"\r\n    >\r\n      {iconElement}\r\n      <Typography variant=\"h5\">{label}</Typography>\r\n      {iconElement}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default HomePageButton;\r\n","import { Typography } from \"@material-ui/core\";\r\nimport { Info, Room, Search, Settings } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\nimport { styles } from \"../../styles\";\r\nimport PageTemplate from \"../layouts/PageTemplate\";\r\nimport HomePageButton from \"../misc/HomePageButton\";\r\n\r\ndeclare interface HomePageProps {}\r\n\r\nconst HomePage: React.FunctionComponent<HomePageProps> = () => {\r\n  const classes = styles();\r\n\r\n  return (\r\n    <PageTemplate heading=\"Welcome to Bun Alert!\" title=\"\">\r\n      <Typography variant=\"h6\" className={classes.pageTitle}>\r\n        \"They need to know: there are buns.\" - xkcd 1871\r\n      </Typography>\r\n      <HomePageButton\r\n        label=\"Learn More About Bun Alert\"\r\n        route=\"/bun-alert/about\"\r\n        icon={Info}\r\n      />\r\n      <HomePageButton\r\n        label=\"Report a Bun Sighting\"\r\n        route=\"/bun-alert/report-bun\"\r\n        icon={Room}\r\n      />\r\n      <HomePageButton\r\n        label=\"Find Nearby Buns\"\r\n        route=\"/bun-alert/find-buns\"\r\n        icon={Search}\r\n      />\r\n      <HomePageButton\r\n        label=\"Settings\"\r\n        route=\"/bun-alert/settings\"\r\n        icon={Settings}\r\n      />\r\n    </PageTemplate>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import {\r\n  Box,\r\n  Button,\r\n  MenuItem,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Error } from \"@material-ui/icons\";\r\nimport { nanoid } from \"nanoid\";\r\nimport React, { Fragment } from \"react\";\r\nimport { getPreLoadedLocation } from \"../../data/preLoadedLocation\";\r\nimport { recordBunSighting } from \"../../scripts/recordBunSighting\";\r\nimport { styles } from \"../../styles\";\r\nimport PageTemplate from \"../layouts/PageTemplate\";\r\nimport { SetNotificationMessageProps } from \"../misc/Notifications\";\r\nimport RequireLocationServices from \"../misc/RequireLocationServices\";\r\n\r\ndeclare interface ReportBunPageProps\r\n  extends RequiresAccessToLocationServices,\r\n    SetNotificationMessageProps {}\r\n\r\nconst ReportBunPage: React.FunctionComponent<ReportBunPageProps> = ({\r\n  accessToLocationServices,\r\n  setNotification,\r\n}) => {\r\n  const classes = styles();\r\n\r\n  const [numberOfBuns, setNumberOfBuns] = React.useState<number | \"\">(\"\");\r\n  const [rankOfSmallestBun, setRankOfSmallestBun] = React.useState<\r\n    BunRanks | \"\"\r\n  >(\"\");\r\n\r\n  const hasError = () => {\r\n    return numberOfBuns === \"\" || numberOfBuns <= 0 || rankOfSmallestBun === \"\";\r\n  };\r\n\r\n  const clear = () => {\r\n    setNumberOfBuns(\"\");\r\n    setRankOfSmallestBun(\"\");\r\n  };\r\n\r\n  return (\r\n    <PageTemplate heading=\"Report a Bun Sighting\" title=\"Report Bun\">\r\n      <RequireLocationServices\r\n        accessToLocationServices={accessToLocationServices}\r\n        prefix=\"Location Services are required to report bun sightings!\"\r\n        message=\"We need to know where you've found your bun... please enable location services to report a bun sighting.\"\r\n      >\r\n        {/* Number of Buns */}\r\n        <Box className={classes.marginedTopBottom}>\r\n          <TextField\r\n            error={numberOfBuns === \"\" || numberOfBuns <= 0}\r\n            fullWidth\r\n            helperText={\r\n              (numberOfBuns === \"\" || numberOfBuns <= 0) && (\r\n                <Fragment>\r\n                  <Error fontSize=\"inherit\" />\r\n                  {\" There must be at least one bun!\"}\r\n                </Fragment>\r\n              )\r\n            }\r\n            id={`enter-number-of-buns`}\r\n            label=\"Number of Buns\"\r\n            onChange={(event) => {\r\n              const value =\r\n                event.target.value !== \"\"\r\n                  ? Math.trunc(parseFloat(event.target.value))\r\n                  : \"\";\r\n              setNumberOfBuns(value);\r\n            }}\r\n            type=\"number\"\r\n            value={numberOfBuns.toString()}\r\n            variant=\"outlined\"\r\n          />\r\n        </Box>\r\n\r\n        {/* Size of Smallest Bun */}\r\n        <Box className={classes.marginedTopBottom}>\r\n          <TextField\r\n            error={rankOfSmallestBun === \"\"}\r\n            fullWidth\r\n            helperText={\r\n              rankOfSmallestBun === \"\" && (\r\n                <Fragment>\r\n                  <Error fontSize=\"inherit\" />\r\n                  {\" Please select a size range for the smallest bun.\"}\r\n                </Fragment>\r\n              )\r\n            }\r\n            id={`select-rank-of-buns`}\r\n            label=\"Select the Approximate Length from Head to Tail of the Smallest Bun\"\r\n            onChange={(event) => {\r\n              setRankOfSmallestBun(event.target.value as BunRanks | \"\");\r\n            }}\r\n            select\r\n            value={rankOfSmallestBun}\r\n            variant=\"outlined\"\r\n          >\r\n            {[\r\n              {\r\n                label: <em>Please select a size range</em>,\r\n                value: \"\",\r\n              },\r\n              {\r\n                label: \"< 3.5 inches (smaller than a computer mouse)\",\r\n                value: \"Baby Bun\",\r\n              },\r\n              {\r\n                label: \"< 4.75 inches (smaller than a pop can)\",\r\n                value: \"King Bun\",\r\n              },\r\n              {\r\n                label: \"< 6 inches (smaller than an eyeglasses case)\",\r\n                value: \"Queen Bun\",\r\n              },\r\n              {\r\n                label: \"< 8 inches (smaller than a disposable water bottle)\",\r\n                value: \"Princess Bun\",\r\n              },\r\n              {\r\n                label: \"< 12 inches (smaller than a loaf of bread)\",\r\n                value: \"Prince Bun\",\r\n              },\r\n              {\r\n                label: \"> 12 inches (larger than a loaf of bread)\",\r\n                value: \"Peasent Bun\",\r\n              },\r\n            ].map((option, index) => {\r\n              return (\r\n                <MenuItem\r\n                  key={`select-bun-rank-option-${index}`}\r\n                  value={option.value}\r\n                >\r\n                  {option.label}\r\n                </MenuItem>\r\n              );\r\n            })}\r\n          </TextField>\r\n        </Box>\r\n\r\n        {/* Bun Rank */}\r\n        <Box className={classes.marginedTopBottom}>\r\n          <TextField\r\n            disabled\r\n            fullWidth\r\n            id={`display-bun-rank`}\r\n            label=\"Informational: Rank of the Smallest Bun\"\r\n            value={rankOfSmallestBun}\r\n            variant=\"outlined\"\r\n          />\r\n        </Box>\r\n        <Button\r\n          color=\"primary\"\r\n          className={classes.marginedTopBottom}\r\n          disabled={hasError()}\r\n          fullWidth\r\n          onClick={() => {\r\n            const location = getPreLoadedLocation();\r\n            if (location) {\r\n              recordBunSighting(\r\n                {\r\n                  id: nanoid(),\r\n                  numberOfBuns: numberOfBuns !== \"\" ? numberOfBuns : 1,\r\n                  rankOfSmallestBun:\r\n                    rankOfSmallestBun !== \"\"\r\n                      ? rankOfSmallestBun\r\n                      : \"Peasent Bun\",\r\n                  timeOfSighting: Date.now(),\r\n                  latitude: location.latitude,\r\n                  longitude: location.longitude,\r\n                },\r\n                setNotification\r\n              );\r\n              clear();\r\n            } else {\r\n              setNotification({\r\n                type: \"error\",\r\n                message:\r\n                  \"Unable to get your location to create a Bun Sighting. Please try again.\",\r\n              });\r\n            }\r\n          }}\r\n          variant=\"contained\"\r\n        >\r\n          <Typography variant=\"h5\">Submit Bun Sighting</Typography>\r\n        </Button>\r\n      </RequireLocationServices>\r\n    </PageTemplate>\r\n  );\r\n};\r\n\r\nexport default ReportBunPage;\r\n","import { NotificationMessage } from \"../components/misc/Notifications\";\r\nimport { firestore } from \"../config/firebaseConfig\";\r\nimport { addBun } from \"../data/notifiedBuns\";\r\n\r\nexport const recordBunSighting = (\r\n  bun: BunSighting,\r\n  setNotification: (notification: NotificationMessage) => void\r\n) => {\r\n  addBun(bun.id);\r\n  firestore\r\n    .collection(\"buns\")\r\n    .doc(bun.id)\r\n    .set(bun)\r\n    .then(() => {\r\n      if (bun.rankOfSmallestBun === \"Baby Bun\") {\r\n        setNotification({\r\n          type: \"info\",\r\n          message:\r\n            'Baby Bun sighting reported with limited alerts (more info on the \"About\" page).',\r\n        });\r\n      } else {\r\n        setNotification({\r\n          type: \"success\",\r\n          message: \"Bun sighting reported successfully.\",\r\n        });\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n      setNotification({\r\n        type: \"error\",\r\n        message: \"Unable to report bun sighting. Please try again later.\",\r\n      });\r\n    });\r\n};\r\n","import { Box, MenuItem, TextField, Typography } from \"@material-ui/core\";\r\nimport { Error } from \"@material-ui/icons\";\r\nimport React, { Fragment } from \"react\";\r\nimport {\r\n  getStoredBunFilterParameters,\r\n  setStoredBunFilterParameters,\r\n  setStoredNotificationFilter,\r\n} from \"../../data/storedSettings\";\r\nimport { styles } from \"../../styles\";\r\nimport PageTemplate from \"../layouts/PageTemplate\";\r\n\r\ndeclare interface SettingsPageProps {\r\n  notificationFilter: number;\r\n  setNotificationFilter: (notificationFilter: number) => void;\r\n}\r\n\r\nconst SettingsPage: React.FunctionComponent<SettingsPageProps> = ({\r\n  notificationFilter,\r\n  setNotificationFilter,\r\n}) => {\r\n  const classes = styles();\r\n\r\n  const [bunFilterParameters, setBunFilterParamters] =\r\n    React.useState<EditableBunFilterParameters>(getStoredBunFilterParameters());\r\n\r\n  const storeIfValidBunFilterParamters = (\r\n    bunFilterParameters: EditableBunFilterParameters\r\n  ) => {\r\n    setBunFilterParamters(bunFilterParameters);\r\n\r\n    if (\r\n      !(\r\n        bunFilterParameters.maxAlertAge === \"\" ||\r\n        bunFilterParameters.maxAlertAge <= 0 ||\r\n        bunFilterParameters.maxDistanceAway === \"\" ||\r\n        bunFilterParameters.maxDistanceAway <= 0 ||\r\n        bunFilterParameters.walkingSpeed === \"\" ||\r\n        bunFilterParameters.walkingSpeed <= 0 ||\r\n        bunFilterParameters.detourCoefficent === \"\" ||\r\n        bunFilterParameters.detourCoefficent < 0.01 ||\r\n        bunFilterParameters.detourCoefficent > 1\r\n      )\r\n    ) {\r\n      const maxAlertAge = bunFilterParameters.maxAlertAge;\r\n      const maxDistanceAway = bunFilterParameters.maxDistanceAway;\r\n      const walkingSpeed = bunFilterParameters.walkingSpeed;\r\n      const detourCoefficent = bunFilterParameters.detourCoefficent;\r\n      setStoredBunFilterParameters({\r\n        maxAlertAge,\r\n        maxDistanceAway,\r\n        walkingSpeed,\r\n        detourCoefficent,\r\n      });\r\n    }\r\n  };\r\n\r\n  const actualMaxDistance = () => {\r\n    if (\r\n      !(\r\n        bunFilterParameters.maxAlertAge === \"\" ||\r\n        bunFilterParameters.maxAlertAge <= 0 ||\r\n        bunFilterParameters.maxDistanceAway === \"\" ||\r\n        bunFilterParameters.maxDistanceAway <= 0 ||\r\n        bunFilterParameters.walkingSpeed === \"\" ||\r\n        bunFilterParameters.walkingSpeed <= 0 ||\r\n        bunFilterParameters.detourCoefficent === \"\" ||\r\n        bunFilterParameters.detourCoefficent < 0.01 ||\r\n        bunFilterParameters.detourCoefficent > 1\r\n      )\r\n    ) {\r\n      const maxAlertAge = bunFilterParameters.maxAlertAge;\r\n      const maxDistanceAway = bunFilterParameters.maxDistanceAway;\r\n      const walkingSpeed = bunFilterParameters.walkingSpeed;\r\n      const detourCoefficent = bunFilterParameters.detourCoefficent;\r\n      return Math.min(\r\n        maxDistanceAway,\r\n        walkingSpeed * detourCoefficent * (maxAlertAge / 60)\r\n      ).toString();\r\n    } else {\r\n      return \"\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <PageTemplate heading=\"Settings\">\r\n      <Typography variant=\"h4\">Bun Alert Filter Parameters</Typography>\r\n      {/* Max Alert Age */}\r\n      <Box className={classes.marginedTopBottom}>\r\n        <TextField\r\n          error={\r\n            bunFilterParameters.maxAlertAge === \"\" ||\r\n            bunFilterParameters.maxAlertAge <= 0\r\n          }\r\n          fullWidth\r\n          helperText={\r\n            (bunFilterParameters.maxAlertAge === \"\" ||\r\n              bunFilterParameters.maxAlertAge <= 0) && (\r\n              <Fragment>\r\n                <Error fontSize=\"inherit\" />\r\n                {\r\n                  \" There must be at least one minute before an alert goes stale!\"\r\n                }\r\n              </Fragment>\r\n            )\r\n          }\r\n          id={`enter-max-alert-age`}\r\n          label=\"Max Alert Age in Minutes (default is 15 minutes)\"\r\n          onChange={(event) => {\r\n            const maxAlertAge =\r\n              event.target.value !== \"\"\r\n                ? Math.trunc(parseFloat(event.target.value))\r\n                : \"\";\r\n            storeIfValidBunFilterParamters({\r\n              ...bunFilterParameters,\r\n              maxAlertAge,\r\n            });\r\n          }}\r\n          type=\"number\"\r\n          value={bunFilterParameters.maxAlertAge.toString()}\r\n          variant=\"outlined\"\r\n        />\r\n      </Box>\r\n\r\n      {/* Max Distance */}\r\n      <Box className={classes.marginedTopBottom}>\r\n        <TextField\r\n          error={\r\n            bunFilterParameters.maxDistanceAway === \"\" ||\r\n            bunFilterParameters.maxDistanceAway <= 0\r\n          }\r\n          fullWidth\r\n          helperText={\r\n            (bunFilterParameters.maxDistanceAway === \"\" ||\r\n              bunFilterParameters.maxDistanceAway <= 0) && (\r\n              <Fragment>\r\n                <Error fontSize=\"inherit\" />\r\n                {\r\n                  \" There must be at least some distance allowed between you and the furthest alert!\"\r\n                }\r\n              </Fragment>\r\n            )\r\n          }\r\n          id={`enter-max-distance-away`}\r\n          label=\"Max Distance in Miles to Walk to Bun Sighting (default is 1 mile)\"\r\n          onChange={(event) => {\r\n            const maxDistanceAway =\r\n              event.target.value !== \"\" ? parseFloat(event.target.value) : \"\";\r\n            storeIfValidBunFilterParamters({\r\n              ...bunFilterParameters,\r\n              maxDistanceAway,\r\n            });\r\n          }}\r\n          type=\"number\"\r\n          value={bunFilterParameters.maxDistanceAway.toString()}\r\n          variant=\"outlined\"\r\n        />\r\n      </Box>\r\n\r\n      {/* Walking Speed */}\r\n      <Box className={classes.marginedTopBottom}>\r\n        <TextField\r\n          error={\r\n            bunFilterParameters.walkingSpeed === \"\" ||\r\n            bunFilterParameters.walkingSpeed <= 0\r\n          }\r\n          fullWidth\r\n          helperText={\r\n            (bunFilterParameters.walkingSpeed === \"\" ||\r\n              bunFilterParameters.walkingSpeed <= 0) && (\r\n              <Fragment>\r\n                <Error fontSize=\"inherit\" />\r\n                {\" Walking speed must be greater than 0!\"}\r\n              </Fragment>\r\n            )\r\n          }\r\n          id={`enter-walking-speed`}\r\n          label=\"Average Walking Speed in Miles/Hour (default is 3.1 mile/hour)\"\r\n          onChange={(event) => {\r\n            const walkingSpeed =\r\n              event.target.value !== \"\" ? parseFloat(event.target.value) : \"\";\r\n            storeIfValidBunFilterParamters({\r\n              ...bunFilterParameters,\r\n              walkingSpeed,\r\n            });\r\n          }}\r\n          type=\"number\"\r\n          value={bunFilterParameters.walkingSpeed.toString()}\r\n          variant=\"outlined\"\r\n        />\r\n      </Box>\r\n\r\n      {/* Detour Coefficent */}\r\n      <Box className={classes.marginedTopBottom}>\r\n        <TextField\r\n          error={\r\n            bunFilterParameters.detourCoefficent === \"\" ||\r\n            bunFilterParameters.detourCoefficent < 0.01 ||\r\n            bunFilterParameters.detourCoefficent > 1\r\n          }\r\n          fullWidth\r\n          helperText={\r\n            (bunFilterParameters.detourCoefficent === \"\" ||\r\n              bunFilterParameters.detourCoefficent < 0.01 ||\r\n              bunFilterParameters.detourCoefficent > 1) && (\r\n              <Fragment>\r\n                <Error fontSize=\"inherit\" />\r\n                {\" The percentage must be between 1% and 100%!\"}\r\n              </Fragment>\r\n            )\r\n          }\r\n          id={`enter-detour-coefficent`}\r\n          label=\"Average Progress towards Bun Alert out of Total Distance Walked as a Percent (default is 70%)\"\r\n          onChange={(event) => {\r\n            const detourCoefficent =\r\n              event.target.value !== \"\"\r\n                ? parseFloat(event.target.value) / 100\r\n                : \"\";\r\n            storeIfValidBunFilterParamters({\r\n              ...bunFilterParameters,\r\n              detourCoefficent,\r\n            });\r\n          }}\r\n          type=\"number\"\r\n          value={\r\n            bunFilterParameters.detourCoefficent === \"\"\r\n              ? \"\"\r\n              : (\r\n                  Math.round(bunFilterParameters.detourCoefficent * 100000000) /\r\n                  1000000\r\n                ).toString()\r\n          }\r\n          variant=\"outlined\"\r\n        />\r\n      </Box>\r\n\r\n      {/* Actual Max Distance */}\r\n      <Box className={classes.marginedTopBottom}>\r\n        <TextField\r\n          disabled\r\n          fullWidth\r\n          id={`actual-max-distance`}\r\n          label=\"Actual Max Distance of Furthest Alert using the Proprietary Bun Alert Freshness Algorithm\"\r\n          value={actualMaxDistance()}\r\n          variant=\"outlined\"\r\n        />\r\n      </Box>\r\n\r\n      <Typography variant=\"h4\">Do Not Disturb Settings</Typography>\r\n      {/* Minumum Rank for Bun Alert */}\r\n      <Box className={classes.marginedTopBottom}>\r\n        <TextField\r\n          fullWidth\r\n          id={`minimum-rank-for-bun-alert`}\r\n          label=\"Select the Minimum Rank to Receive Bun Alerts for\"\r\n          onChange={(event) => {\r\n            const notificationFilter = parseInt(event.target.value);\r\n            setNotificationFilter(notificationFilter);\r\n            setStoredNotificationFilter(notificationFilter);\r\n          }}\r\n          select\r\n          value={notificationFilter}\r\n          variant=\"outlined\"\r\n        >\r\n          {[\r\n            {\r\n              label: <em>Do Not Disturb</em>,\r\n              value: 0,\r\n            },\r\n            {\r\n              label: \"Baby Bun\",\r\n              value: 1,\r\n            },\r\n            {\r\n              label: \"King Bun\",\r\n              value: 2,\r\n            },\r\n            {\r\n              label: \"Queen Bun\",\r\n              value: 3,\r\n            },\r\n            {\r\n              label: \"Princess Bun\",\r\n              value: 4,\r\n            },\r\n            {\r\n              label: \"Prince Bun\",\r\n              value: 5,\r\n            },\r\n            {\r\n              label: \"Peasent Bun\",\r\n              value: 6,\r\n            },\r\n          ].map((option, index) => {\r\n            return (\r\n              <MenuItem\r\n                key={`select-notification-filter-option-${index}`}\r\n                value={option.value}\r\n              >\r\n                {option.label}\r\n              </MenuItem>\r\n            );\r\n          })}\r\n        </TextField>{\" \"}\r\n      </Box>\r\n    </PageTemplate>\r\n  );\r\n};\r\n\r\nexport default SettingsPage;\r\n","import { NotificationMessage } from \"../components/misc/Notifications\";\r\nimport { firestore } from \"../config/firebaseConfig\";\r\nimport {\r\n  addBun,\r\n  deleteBun,\r\n  isInitialLoad,\r\n  runInitialLoad,\r\n} from \"../data/notifiedBuns\";\r\nimport { getPreLoadedLocation } from \"../data/preLoadedLocation\";\r\nimport { bunMatchesFilters } from \"./filterAndSortBunSightings\";\r\nimport { preProcessBunSighting } from \"./preProcessBunSightings\";\r\nimport { sendBunAlertNotification } from \"./sendBunAlertNotification\";\r\n\r\nexport const listenForNewBunSightings = (\r\n  setNearbyBuns: (nearbyBuns: BunSighting[]) => void,\r\n  setNotification: (notification: NotificationMessage) => void\r\n) => {\r\n  return firestore.collection(\"buns\").onSnapshot(\r\n    (snapshot) => {\r\n      // Update list of known buns\r\n      setNearbyBuns(\r\n        snapshot.docs.map((doc) => {\r\n          return doc.data() as BunSighting;\r\n        })\r\n      );\r\n\r\n      // Update list of known buns and send notifications of new bun alerts\r\n      snapshot.docChanges().forEach((documentChange) => {\r\n        const bun = documentChange.doc.data() as BunSighting;\r\n        if (documentChange.type === \"added\") {\r\n          const preProcessedBun = preProcessBunSighting(\r\n            bun,\r\n            Date.now(),\r\n            getPreLoadedLocation()\r\n          );\r\n          if (\r\n            bunMatchesFilters(preProcessedBun) &&\r\n            addBun(bun.id) &&\r\n            !isInitialLoad()\r\n          ) {\r\n            sendBunAlertNotification(preProcessedBun);\r\n          }\r\n        } else if (documentChange.type === \"removed\") {\r\n          deleteBun(bun.id);\r\n        } else {\r\n          console.warn(\r\n            \"An existing Firebase document was changed. This should not happen!\"\r\n          );\r\n        }\r\n      });\r\n\r\n      // Start allowing notifications of new buns after the intial load\r\n      runInitialLoad();\r\n    },\r\n    (error) => {\r\n      console.log(error);\r\n      setNotification({\r\n        type: \"error\",\r\n        message: \"Unable to get bun sightings. Please try again later.\",\r\n      });\r\n    }\r\n  );\r\n};\r\n","import { Container } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport LeftMenu from \"./components/layouts/LeftMenu\";\r\nimport NavBar from \"./components/layouts/NavBar\";\r\nimport BugReportFab from \"./components/misc/BugReportFab\";\r\nimport NotificationInfoManager from \"./components/misc/NotificationInfoManager\";\r\nimport NotificationBar, {\r\n  NotificationMessage,\r\n} from \"./components/misc/Notifications\";\r\nimport AboutPage from \"./components/pages/AboutPage\";\r\nimport Error404Page from \"./components/pages/Error404Page\";\r\nimport FindBunsPage from \"./components/pages/FindBunsPage\";\r\nimport HomePage from \"./components/pages/HomePage\";\r\nimport ReportBunPage from \"./components/pages/ReportBunPage\";\r\nimport SettingsPage from \"./components/pages/SettingsPage\";\r\nimport { setPreLoadedLocation } from \"./data/preLoadedLocation\";\r\nimport { getStoredNotificationFilter } from \"./data/storedSettings\";\r\nimport { listenForNewBunSightings } from \"./scripts/listenForNewBunSightings\";\r\n\r\ndeclare interface AppProps {\r\n  theme: \"light\" | \"dark\";\r\n  toggleTheme: () => void;\r\n}\r\n\r\nconst App: React.FunctionComponent<AppProps> = ({ theme, toggleTheme }) => {\r\n  // In App Notifications\r\n  const [notification, setNotification] =\r\n    React.useState<NotificationMessage>(null);\r\n\r\n  // Let Menu\r\n  const [leftMenuOpen, setLeftMenuOpen] = React.useState<boolean>(false);\r\n\r\n  const toggleLeftMenu = () => {\r\n    setLeftMenuOpen(!leftMenuOpen);\r\n  };\r\n\r\n  const closeLeftMenu = () => {\r\n    setLeftMenuOpen(false);\r\n  };\r\n\r\n  // Location Services\r\n  const [accessToLocationServices, setAccessToLocationServices] =\r\n    React.useState<boolean>();\r\n\r\n  if (accessToLocationServices === undefined) {\r\n    navigator.geolocation.getCurrentPosition(\r\n      (location) => {\r\n        setAccessToLocationServices(true);\r\n        const newLocation = {\r\n          latitude: location.coords.latitude,\r\n          longitude: location.coords.longitude,\r\n        };\r\n        setLocation(newLocation);\r\n        setPreLoadedLocation(newLocation);\r\n      },\r\n      (error) => {\r\n        console.log(error);\r\n        setAccessToLocationServices(false);\r\n      }\r\n    );\r\n  }\r\n\r\n  // Location refresher\r\n  const [location, setLocation] = React.useState<GeoLocation>();\r\n\r\n  React.useEffect(() => {\r\n    if (accessToLocationServices === true) {\r\n      const locationListener = navigator.geolocation.watchPosition(\r\n        (location) => {\r\n          const newLocation = {\r\n            latitude: location.coords.latitude,\r\n            longitude: location.coords.longitude,\r\n          };\r\n          setLocation(newLocation);\r\n          setPreLoadedLocation(newLocation);\r\n        },\r\n        (error) => {\r\n          console.log(error);\r\n          setNotification({\r\n            type: \"error\",\r\n            message:\r\n              \"Unable to get your location to find buns nearby. Please try again.\",\r\n          });\r\n        }\r\n      );\r\n      return () => {\r\n        navigator.geolocation.clearWatch(locationListener);\r\n      };\r\n    }\r\n  }, [accessToLocationServices]);\r\n\r\n  // Firestore Buns\r\n  const [allBuns, setAllBuns] = React.useState<BunSighting[]>([]);\r\n\r\n  React.useEffect(() => {\r\n    const bunListener = listenForNewBunSightings(setAllBuns, setNotification);\r\n    return () => {\r\n      bunListener();\r\n    };\r\n  }, []);\r\n\r\n  // Notificaiton Filter for Do Not Disturb\r\n  const [notificationFilter, setNotificationFilter] = React.useState(\r\n    getStoredNotificationFilter()\r\n  );\r\n\r\n  return (\r\n    <Router>\r\n      <NavBar\r\n        theme={theme}\r\n        toggleTheme={toggleTheme}\r\n        toggleLeftMenu={toggleLeftMenu}\r\n      />\r\n      <Container>\r\n        <NotificationInfoManager\r\n          accessToLocationServices={accessToLocationServices}\r\n          notificationFilter={notificationFilter}\r\n        />\r\n        <Switch>\r\n          <Route path=\"/bun-alert/\" exact>\r\n            <HomePage />\r\n          </Route>\r\n          <Route path=\"/bun-alert/about\" exact>\r\n            <AboutPage />\r\n          </Route>\r\n          <Route path=\"/bun-alert/report-bun\" exact>\r\n            <ReportBunPage\r\n              accessToLocationServices={accessToLocationServices}\r\n              setNotification={setNotification}\r\n            />\r\n          </Route>\r\n          <Route path=\"/bun-alert/find-buns\" exact>\r\n            <FindBunsPage\r\n              accessToLocationServices={accessToLocationServices}\r\n              location={location}\r\n              allBuns={allBuns}\r\n            />\r\n          </Route>\r\n          <Route path=\"/bun-alert/settings\" exact>\r\n            <SettingsPage\r\n              notificationFilter={notificationFilter}\r\n              setNotificationFilter={setNotificationFilter}\r\n            />\r\n          </Route>\r\n          <Route>\r\n            <Error404Page />\r\n          </Route>\r\n        </Switch>\r\n      </Container>\r\n      <LeftMenu open={leftMenuOpen} closeLeftMenu={closeLeftMenu} />\r\n      <NotificationBar\r\n        notification={notification}\r\n        setNotification={setNotification}\r\n      />\r\n      <BugReportFab />\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { CssBaseline, ThemeProvider } from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport App from \"../App\";\r\nimport { darkTheme, lightTheme } from \"./theme\";\r\nimport { useDarkMode } from \"./useDarkMode\";\r\n\r\nconst CustomThemeProvider: React.FunctionComponent = () => {\r\n  const { theme, toggleTheme, componentMounted } = useDarkMode();\r\n\r\n  if (!componentMounted) {\r\n    return <Fragment />;\r\n  }\r\n\r\n  return (\r\n    <ThemeProvider theme={theme === \"dark\" ? darkTheme : lightTheme}>\r\n      <Fragment>\r\n        <CssBaseline />\r\n        <App theme={theme} toggleTheme={toggleTheme} />\r\n      </Fragment>\r\n    </ThemeProvider>\r\n  );\r\n};\r\n\r\nexport default CustomThemeProvider;\r\n","import React from \"react\";\r\n\r\nexport const useDarkMode = () => {\r\n  const [theme, setTheme] = React.useState<\"light\" | \"dark\">(\"light\");\r\n  const [componentMounted, setComponentMounted] = React.useState(false);\r\n  const setMode = (mode: \"light\" | \"dark\") => {\r\n    window.localStorage.setItem(\"theme\", mode);\r\n    setTheme(mode);\r\n  };\r\n\r\n  const toggleTheme = () => {\r\n    if (theme === \"light\") {\r\n      setMode(\"dark\");\r\n    } else {\r\n      setMode(\"light\");\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const localTheme = window.localStorage.getItem(\"theme\") as\r\n      | \"light\"\r\n      | \"dark\"\r\n      | null;\r\n    window.matchMedia &&\r\n    window.matchMedia(\"(prefers-color-scheme: dark)\").matches &&\r\n    !localTheme\r\n      ? setMode(\"dark\")\r\n      : localTheme\r\n      ? setTheme(localTheme)\r\n      : setMode(\"light\");\r\n    setComponentMounted(true);\r\n  }, []);\r\n\r\n  return { theme, toggleTheme, componentMounted };\r\n};\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport CustomThemeProvider from \"./styles/CustomThemeProvider\";\r\n\r\nReactDOM.render(<CustomThemeProvider />, document.getElementById(\"root\"));\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}